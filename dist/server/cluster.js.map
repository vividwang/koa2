{"version":3,"sources":["../../server/cluster.js"],"names":["cluster","require","OS","masterProcess","console","info","cpus","length","process","pid","i","fork","exit","child_process","isMaster"],"mappings":";;AAAA;;;AAGA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,KAAKD,QAAQ,IAAR,CAAX;;AAEA;;AAEA,IAAME,gBAAgB,SAAhBA,aAAgB,GAAM;AAC1BC,UAAQC,IAAR,wBAAmBH,GAAGI,IAAH,GAAUC,MAA7B;AACAH,UAAQC,IAAR,8BAAyBG,QAAQC,GAAjC;;AAEA,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIR,GAAGI,IAAH,GAAUC,MAA9B,EAAsCG,GAAtC,EAA2C;AACzCN,YAAQC,IAAR,wCAAyBK,CAAzB;AACAV,YAAQW,IAAR;AACD;;AAEDH,UAAQI,IAAR;AACD,CAVD;;AAYA,IAAMC,gBAAgB,SAAhBA,aAAgB,GAAM;AAC1BT,UAAQC,IAAR,8BAAyBG,QAAQC,GAAjC;AACAD,UAAQI,IAAR;AACD,CAHD;;AAKA,IAAIZ,QAAQc,QAAZ,EAAqB;AACnBX;AACD,CAFD,MAEM;AACJU;AACD","file":"cluster.js","sourcesContent":["/**\n * Created by w on 2018/4/8.\n */\nconst cluster = require('cluster');\nconst OS = require('os');\n\n// console.log(OS.cpus());\n\nconst masterProcess = () => {\n  console.info(`一共有${OS.cpus().length}个核心`);\n  console.info(`master主进程${process.pid}启动`);\n\n  for (let i = 0; i < OS.cpus().length; i++) {\n    console.info(`正在Fork子进程${i}`);\n    cluster.fork();\n  }\n\n  process.exit();\n};\n\nconst child_process = () => {\n  console.info(`Worker子进程${process.pid}启动并退出`);\n  process.exit();\n};\n\nif (cluster.isMaster){\n  masterProcess();\n}else {\n  child_process();\n}"]}