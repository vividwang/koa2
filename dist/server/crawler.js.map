{"version":3,"sources":["../../server/crawler.js"],"names":["cp","require","resolve","script","__dirname","child_p","fork","invoked","on","console","log","err","code","Error","result","data"],"mappings":";;AAAA;;;AAGA,IAAMA,KAAKC,QAAQ,eAAR,CAAX;;eACoBA,QAAQ,MAAR,C;IAAZC,O,YAAAA,O;;AAER,CAAC,kBAAU;AACT,MAAMC,SAASD,QAAQE,SAAR,EAAkB,yBAAlB,CAAf;AACA,MAAMC,UAAUL,GAAGM,IAAH,CAAQH,MAAR,EAAe,EAAf,CAAhB;AACA,MAAII,UAAU,KAAd,CAHS,CAGW;;AAEpBF,UAAQG,EAAR,CAAW,OAAX,EAAmB,eAAK;AACtB,QAAID,OAAJ,EAAa;;AAEbA,cAAU,IAAV;AACAE,YAAQC,GAAR,CAAYC,GAAZ;AACD,GALD;;AAOAN,UAAQG,EAAR,CAAW,MAAX,EAAkB,gBAAM;AACtB,QAAID,OAAJ,EAAa;;AAEb,QAAII,MAAMC,SAAS,CAAT,GAAa,IAAb,GAAmB,IAAIC,KAAJ,CAAU,gBAAeD,IAAzB,CAA7B;;AAEAH,YAAQC,GAAR,CAAYC,GAAZ;AACD,GAND;;AAQAN,UAAQG,EAAR,CAAW,SAAX,EAAqB,gBAAM;AACzB,QAAIM,SAASC,KAAKD,MAAlB;;AAEAL,YAAQC,GAAR,CAAYI,MAAZ;AACD,GAJD;AAKD,CAzBD","file":"crawler.js","sourcesContent":["/**\n * Created by w on 2018/4/2.\n */\nconst cp = require('child_process');\nconst { resolve } = require('path');\n\n(async ()=>{\n  const script = resolve(__dirname,'./tasks/trailer-list.js');\n  const child_p = cp.fork(script,[]);\n  let invoked = false;//标识进程是否被执行过\n\n  child_p.on('error',err=>{\n    if (invoked) return ;\n\n    invoked = true;\n    console.log(err);\n  });\n\n  child_p.on('exit',code=>{\n    if (invoked) return;\n\n    let err = code === 0 ? null :new Error('exit code: ' +code);\n\n    console.log(err);\n  });\n\n  child_p.on('message',data=>{\n    let result = data.result;\n\n    console.log(result);\n  })\n})();"]}